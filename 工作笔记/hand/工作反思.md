# 6月月中小结

第一周

熟悉开发环境【代码结构】和开发工具【猪齿鱼、Git】，开发简单demo，实现简单的增删改查、页面跳转等。

第二周

梳理诉讼管理、保险管理开发逻辑

完成头寸管理模块开发【头寸预报、头寸申报、头寸变更、头寸台账】



## 开发知识

1、配置开发者路由，保证本地测试的请求不会跑到其他人的服务上。

2、完成本地host文件的修改。拉取一个新项目后，需要切换dev分支【创建个人分支】、修改项目名、修改启动方式【classpath file】、修改jdk为1.8

3、提交代码前需要检查有没有修改除自己的功能外的其他代码，如果有需要恢复原样。commit message书写规范如下。在提交到dev分支之前需要先拉取一遍最新的代码，防止冲突。

![image-20230618202927678](https://raw.githubusercontent.com/SAH01/wordpress-img/master/imgs/image-20230618202927678.png)

4、头行保存需要配置父基表。

5、学到了一些系统里的关键表。

```sql
# 查询服务路径、编码等
select * from hzero_admin.hadm_service_route where name='hsps';
# 部门、岗位、员工表
# 根据部门ID获取到岗位信息如果SUPERVISOR_FLAG=1表示当前数据为领导岗位
select SUPERVISOR_FLAG,
       UNIT_ID,
       POSITION_CODE,
       UNIT_COMPANY_ID,
       TENANT_ID,
       POSITION_NAME,
       ORDER_SEQ,
       SUPERVISOR_FLAG,
       POSITION_ID
from hzero_platform.hpfm_position
where UNIT_ID = 38;
#岗位人员关联表
select *
from hzero_platform.hpfm_employee_assign
where EMPLOYEE_ID = 1803;
#员工表
select *
from hzero_platform.hpfm_employee
where EMPLOYEE_ID = 1803;
# 开发人员信息表
select *
from hzero_platform.iam_user
where phone like '152%';
# 部门表
select *
from hzero_platform.hpfm_unit;
# 项目表
select project_id, PROJECT_NAME
from byjz_bus.hlpj_project;

```

6、跨服务调用接口

![image-20230618205456615](https://raw.githubusercontent.com/SAH01/wordpress-img/master/imgs/image-20230618205456615.png)

7、工作流配置

​		**单据绑定分类，服务绑定接口。**

​		**单据和服务需要在流程图绑定。**

8、变更的开发逻辑

​		**原表、变更表、历史表**

9、用到的常量用一个类封装，需要时直接取类里的枚举值。

10、在页面跳转之后，把前一个页面的数据优先渲染在新页面上，**@dataSetLoadHandler**。

11、开发规范：controller的路由名和方法名保持一致【小驼峰命名】。

12、获取dataSet的数据以及给dataSet中的数据赋值

```javascript
	const formDS = searchDataSet({ tabCode: 'F_FORM' }, this.dataSets);
    const { positionId } = formDS.current.toData();    
	const ds = searchDataSet({ tabCode: 'F_FORM' }, this.dataSets);
    ds.current.set('positionApplicationTime', new Date());
```

13、渲染按钮**layoutButtonRenderHandler**、渲染超链接**componentRenderHandler**、配置dataSet变量**configDataSets**、加载时渲染dataSet的值**dataSetLoadHandler**。

14、equalsIgnoreCase( )方法，忽略大小写。

```java
LitigationStageCodeEnum.SET_UP_CASE.getCode().equalsIgnoreCase(litigation1.getStatus())
```



## 踩过的坑

1、DynamicState 注解是只读页面，不会显示按钮。

2、注意不要把单词拼写错误，比如大写 I 和 小写 l 的区别、form和from。

3、修改数据库表之后，需要同步修改类和mapper。

4、本地项目成功启动后，新增加的接口才会同步到服务器，而且需要去手动刷新。

5、Lov的使用，需要用的字段另行声明并绑定到Lov变量上，且Lov变量不要和后端的变量名重复，会有冲突。

6、配置流程单据，路径需要加pub和权限控制。

`relative://pub/hlfn/advance/position/detail/${positionId}?readOnly=Y`

7、页面布局配置，查询URL。**如果存在相同基表的组件，就会被视为同一个Ds**，所以只会走最后一个组件的查询URL，其他组件的URL会失效。

前端：

```javascript
// 预报审批
      {
        path: '/pub/hlfn/advance/position/detail/:positionId',
        component: 'Position/PositionDetail',
        authorized: true
      },
```

7、要注意看方法的返回值类型，下面这个方法会返回一个长度为0的List，并不是null。

```java
        List<ProjectPositionH> projectPositionHList = projectPositionHRepository.select(projectPositionH);
```



## 其他

1、要多和业务沟通，业务逻辑需要清楚之后再开始写。

2、页面要确认了之后再开始画。

3、表要一次建好，且最好使用最少的表实现功能。

4、能在配置上修改的一定要转移到配置，轻易不要动代码。比如外部接口调用的参数，可以选择配置，而不是通过代码修改参数值。





