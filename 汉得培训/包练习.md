# 公司表

## head

【注意在包头声明包体内的函数、过程】

```sql
create or replace package prj_project_42624_pkg is

  -- Author  : chuanwei.yang 42624
  -- Created : 2023-03-08 16:03:10
  -- Purpose : 实现一个项目的登记录入，以及审批流程

  -- Public type declarations

  -- Public constant declarations

  -- Public variable declarations

  /*function func_company_code_is_exists(p_company_code varchar2)
  return number;*/
  PROCEDURE proc_company_code_is_exists(p_company_code varchar2,
                                        p_flag         OUT BOOLEAN); -- 判断公司代码是否重复
  PROCEDURE proc_rate_type_judge(p_rate_type varchar2, p_flag OUT BOOLEAN); -- 判断汇率是否合法
  PROCEDURE proc_currency_judge(p_currency_type varchar2,
                                p_flag          OUT BOOLEAN); -- 判断币种是否合法
  PROCEDURE proc_date_judge(p_start_date date,
                            p_end_date   date,
                            p_flag       OUT BOOLEAN); -- 判断日期是否合法
  FUNCTION insert_fnd_companies(COMPANY_CODE             VARCHAR2,
                                COMPANY_SHORT_NAME       VARCHAR2,
                                COMPANY_FULL_NAME        VARCHAR2,
                                FUNCTIONAL_CURRENCY_CODE VARCHAR2,
                                START_DATE_ACTIVE        DATE,
                                END_DATE_ACTIVE          DATE,
                                EXCHANGE_RATE_TYPE       VARCHAR2)
  
   RETURN number; -- 包入口，完成数据验证和插入。
end prj_project_42624_pkg;

```



## body

```sql
create or replace package body prj_project_42624_pkg is

  g_this_package_name varchar2(50) := 'prj_project_42624_pkg'; -- 包名
  e_except_num          EXCEPTION; -- 公司代码重复异常 
  e_wrong_rate_type     EXCEPTION; -- 汇率种类异常
  e_wrong_currency_type EXCEPTION; -- 币种异常  
  e_wrong_date_type     EXCEPTION; -- 日期异常
  -- 创建存储函数 func_company_code_is_exists 查找公司代码重复个数并返回
  FUNCTION func_company_code_is_exists(p_company_code varchar2) return number is
    v_num number := 0; -- 返回重复个数
    /*v_code FND_COMPANIES_42624.COMPANY_CODE%TYPE;  -- v_code 类型和Company_Code保持一致*/
    /*CURSOR company_cursor IS
    select company_code from FND_COMPANIES_42624;    -- 游标查询所有company_code*/
  BEGIN
    -- 用count计数，查找重复个数。
    select count(1)
      into v_num
      from FND_COMPANIES_42624
     where COMPANY_CODE = p_company_code;
    return v_num;       -- 返回重复个数
  END;

  -- 创建存储过程 proc_company_code_is_exists调用存储函数 func_company_code_is_exists判断是否重复
  PROCEDURE proc_company_code_is_exists(p_company_code varchar2,
                                        p_flag OUT BOOLEAN) is
    v_num number := 0; -- 存储函数返回值
  BEGIN
    v_num := func_company_code_is_exists(p_company_code); 
    DBMS_OUTPUT.PUT_LINE('公司代码重复个数：' || v_num);
    /*DBMS_OUTPUT.PUT_LINE(v_num);*/
    if v_num <> 0 then
      p_flag := false; -- p_flag置为false
      raise e_except_num; -- 如果 <> 0 说明公司代码有重复
      else
        p_flag := true; 
    end if;
  EXCEPTION
    when e_except_num then  
      -- 抛出公司代码重复异常
      /*注意一个问题，参数赋值语句不可以写到异常处理处。
      异常处理时，函数已经执行完毕，赋值会失败。 */  
      /*p_flag := false; */
      DBMS_OUTPUT.PUT_LINE('公司代码存在重复值，请检查后重新输入！'); 
  END;

  -- 创建存储过程 proc_rate_type_judge 判断汇率类型是否包含在 DAILY、PERIOD之内    
  PROCEDURE proc_rate_type_judge (p_rate_type varchar2, p_flag OUT BOOLEAN) is
  BEGIN
    if p_rate_type not in ('DAILY', 'PERIOD') then
      -- 汇率不合法 抛出异常
      p_flag := false;    -- p_flag置为false
      raise e_wrong_rate_type;
      else
        p_flag := true;
    end if;
  EXCEPTION
    when e_wrong_rate_type then
      DBMS_OUTPUT.PUT_LINE('汇率不包含在DAILY、PERIOD之内，请检查后重新输入！');
  END;
  -- 创建存储函数 func_currency_judge 返回币种查询结果
  FUNCTION func_currency_judge(p_currency_type varchar2) return number is
    v_res_num number := 1; -- 返回值
  BEGIN
    select count(1)
      into v_res_num
      from gld_currency_vl    -- 把查出的值赋给v_res_num
     where enabled_flag = 'Y'
       and currency_code = p_currency_type;
    return v_res_num;         -- 返回查询结果 
  END;
  
  -- 创建存储过程 proc_currency_judge 调用 func_currency_judge 判断币种是否合法
  PROCEDURE proc_currency_judge(p_currency_type varchar2,
                                p_flag OUT BOOLEAN) is
    v_res_num number := 1;
  BEGIN
    v_res_num := func_currency_judge(p_currency_type); -- 返回值赋值v_res_num
    if v_res_num = 0 then
      -- 如果结果是0 那说明在附表没查到该币种，那么抛出异常
      p_flag := false;        -- p_flag置为false
      raise e_wrong_currency_type;
      else
        p_flag := true;
    end if;
  EXCEPTION
    when e_wrong_currency_type then
      dbms_output.put_line('币种不合法，请检查后重新输入！');
  END;
  
  -- 创建存储过程判断日期的合法性，公司失效日期可以是NULL''，
  -- 生效日期不为空且必须早于失效日期
  PROCEDURE proc_date_judge(p_start_date DATE,
                            p_end_date   DATE,
                            p_flag       OUT BOOLEAN) is
    v_res_minus number := 1; -- 存储两个日期相减的结果
  BEGIN
    -- to_date(p_end_date, 'yyyy-MM-dd') - to_date(p_start_date, 'yyyy-MM-dd')
    select p_end_date - p_start_date
      into v_res_minus     	 -- 做差，如果 失-生<=0 则不合法 
      from dual;
    -- 判断生效日期是否为空 is NULL
    if v_res_minus <= 0 or v_res_minus = NULL or p_start_date is NULL then
      p_flag := false;                 -- p_flag置为false
      raise e_wrong_date_type;         -- 不合法，抛出异常
      else
        p_flag := true;
    end if;
  
  EXCEPTION
    WHEN e_wrong_date_type THEN
      -- 日期不合法 抛出异常
      dbms_output.put_line('日期不合法！（公司生效日期不能为空且必须早于失效日期）请检查日期格式是否正确！（例2020-11-06）');
  END;

  -- 写一个包入口
  FUNCTION insert_fnd_companies(COMPANY_CODE             VARCHAR2,
                                COMPANY_SHORT_NAME       VARCHAR2,
                                COMPANY_FULL_NAME        VARCHAR2,
                                FUNCTIONAL_CURRENCY_CODE VARCHAR2,
                                START_DATE_ACTIVE        DATE,
                                END_DATE_ACTIVE          DATE,
                                EXCHANGE_RATE_TYPE       VARCHAR2)
    RETURN number is
  
    CREATED_BY       number := 1;
    CREATION_DATE    date := sysdate;
    LAST_UPDATED_BY  number := 1;
    LAST_UPDATE_DATE date := sysdate;
    v_n number := 0;               -- SQL影响记录数
    
    v_flag_code BOOLEAN;   -- 公司代码flag
    v_flag_rate BOOLEAN;   -- 汇率类型flag
    v_flag_date BOOLEAN;   -- 日期flag
    v_flag_currency BOOLEAN;  -- 币种flag
  BEGIN
    v_flag_code := true;
    v_flag_rate := true;
    v_flag_date := true;
    v_flag_currency := true;
    -- 判断五个字段的合法性
    proc_company_code_is_exists(COMPANY_CODE, v_flag_code); -- 公司代码是否重复
    proc_rate_type_judge(EXCHANGE_RATE_TYPE, v_flag_rate); -- 汇率类型是否合法
    proc_date_judge(START_DATE_ACTIVE, END_DATE_ACTIVE, v_flag_date); -- 日期是否合法
    proc_currency_judge(FUNCTIONAL_CURRENCY_CODE, v_flag_currency); -- 币种是否合法
    
    if v_flag_code and v_flag_rate 
      and v_flag_date and v_flag_currency 
      then   
      -- 如果均验证通过,插入数据
      -- 序列 prj_company_seq_42624 , 表 FND_COMPANIES_42624
      -- sql%rowcount只会记录未被提交的最后一条SQL语句的影响行数。
      dbms_output.put_line('数据验证通过，正在插入数据...');
      insert into FND_COMPANIES_42624
      values
        (prj_company_seq_42624.nextval,
         COMPANY_CODE,
         COMPANY_SHORT_NAME,
         COMPANY_FULL_NAME,
         FUNCTIONAL_CURRENCY_CODE,
         START_DATE_ACTIVE,
         END_DATE_ACTIVE,
         EXCHANGE_RATE_TYPE,
         CREATED_BY,
         CREATION_DATE,
         LAST_UPDATED_BY,
         LAST_UPDATE_DATE);
         v_n := sql%rowcount; 
      dbms_output.put_line('成功插入' || v_n || '条数据！');
      COMMIT;
    else
      -- 如果g_flag为false则提示用户修改。
      dbms_output.put_line('数据验证不通过，请修改！');
    end if;
    RETURN 0;
  END insert_fnd_companies;
end prj_project_42624_pkg;

```



## 测试调用包内函数和过程

```sql
select prj_project_42624_pkg.func_company_code_is_exists('1001') from dual;
CALL prj_project_42624_pkg.proc_company_code_is_exists('1001');	-- 判断重复
CALL prj_project_42624_pkg.proc_rate_type_judge('123'); -- 判断汇率
CALL prj_project_42624_pkg.proc_currency_judge('JPY'); -- 判断币种
select to_date('2020-10-11','yyyy-MM-dd') - to_date('2020-10-12','yyyy-MM-dd') from dual; -- 判断日期大小
CALL prj_project_42624_pkg.proc_date_judge('2020-01-23','2020-01-23'); -- 判断日期合法性

----

declare
  V_COMPANY_CODE             VARCHAR2(30) := '1007'; -- 重复code
  V_COMPANY_SHORT_NAME       VARCHAR2(200) := '简'; -- 公司名（简）
  V_COMPANY_FULL_NAME        VARCHAR2(200) := '繁'; -- 公司名（繁）
  V_FUNCTIONAL_CURRENCY_CODE VARCHAR2(10) := 'HD'; -- 币种 CNY,JPY,HKD,USD合法
  V_START_DATE_ACTIVE        DATE;
  V_END_DATE_ACTIVE          DATE;
  V_EXCHANGE_RATE_TYPE       VARCHAR2(30) := 'DILY'; -- DAILY、PERIOD 合法
  v_res_num                  number := -1; -- 返回值

begin
  select to_date(NULL, 'yyyy-MM-dd')
    into V_START_DATE_ACTIVE
    from dual;
  select to_date('2020-10-17', 'yyyy-MM-dd')
    into V_END_DATE_ACTIVE
    from dual; -- 前者需要早于后者
  -- 函数需要接受返回值
  v_res_num := prj_project_42624_pkg.insert_fnd_companies(COMPANY_CODE             => V_COMPANY_CODE,
                                                          COMPANY_SHORT_NAME       => V_COMPANY_SHORT_NAME,
                                                          COMPANY_FULL_NAME        => V_COMPANY_FULL_NAME,
                                                          FUNCTIONAL_CURRENCY_CODE => V_FUNCTIONAL_CURRENCY_CODE,
                                                          START_DATE_ACTIVE        => V_START_DATE_ACTIVE,
                                                          END_DATE_ACTIVE          => V_END_DATE_ACTIVE,
                                                          EXCHANGE_RATE_TYPE       => V_EXCHANGE_RATE_TYPE);
end;


```

## 创建公司表

```sql
create table FND_COMPANIES_42624(
        COMPANY_ID number(3) primary key,      -- 公司ID number 序列
        COMPANY_CODE VARCHAR2(30) not null,     -- 公司代码 不可重复
        COMPANY_SHORT_NAME VARCHAR2(200) not null,     -- 公司简称
        COMPANY_FULL_NAME   VARCHAR2(200) not null,     -- 公司全称
        FUNCTIONAL_CURRENCY_CODE VARCHAR2(10) not null,     -- 公司财务币种
        START_DATE_ACTIVE DATE,     -- 公司生效日期
        END_DATE_ACTIVE  DATE not null,     -- 公司失效日期
        EXCHANGE_RATE_TYPE VARCHAR2(30) not null,     -- 汇率类型
        CREATED_BY NUMBER(3) not null,       -- 创建者
        CREATION_DATE DATE not null,         -- 创建日期
        LAST_UPDATED_BY NUMBER(3) not null,  -- 更新者
        LAST_UPDATE_DATE DATE not null      -- 更新日期
    )
--添加主键
/*ALTER TABLE "FND_COMPANIES_42624" ADD PRIMARY KEY ("COMPANY_ID");*/
    
--添加表注释
COMMENT ON TABLE FND_COMPANIES_42624 IS '公司表';
--添加字段注释
COMMENT ON COLUMN FND_COMPANIES_42624.COMPANY_ID IS '公司ID';
COMMENT ON COLUMN FND_COMPANIES_42624.COMPANY_CODE IS '公司代码';
COMMENT ON COLUMN FND_COMPANIES_42624.COMPANY_SHORT_NAME IS '公司简称';
COMMENT ON COLUMN FND_COMPANIES_42624.COMPANY_FULL_NAME IS '公司全称';
COMMENT ON COLUMN FND_COMPANIES_42624.FUNCTIONAL_CURRENCY_CODE IS '公司财务币种';
COMMENT ON COLUMN FND_COMPANIES_42624.START_DATE_ACTIVE IS '公司生效日期';
COMMENT ON COLUMN FND_COMPANIES_42624.END_DATE_ACTIVE IS '公司失效日期';
COMMENT ON COLUMN FND_COMPANIES_42624.EXCHANGE_RATE_TYPE IS '汇率类型';
COMMENT ON COLUMN FND_COMPANIES_42624.CREATED_BY IS '创建者';
COMMENT ON COLUMN FND_COMPANIES_42624.CREATION_DATE IS '创建日期';
COMMENT ON COLUMN FND_COMPANIES_42624.LAST_UPDATED_BY IS '更新者';
COMMENT ON COLUMN FND_COMPANIES_42624.LAST_UPDATE_DATE IS '更新日期';

--添加索引
CREATE INDEX FND_COMPANIES_42624_U1 ON FND_COMPANIES_42624(COMPANY_CODE);

-- 创建序列插入数据
CREATE SEQUENCE seq_test_ycw INCREMENT BY 1 START WITH 1; 
insert into FND_COMPANIES_42624
values
  (seq_test_ycw.nextval,
   '1001',
   '简',
   '全',
   'cn',
   to_date('2020-01-02', 'YYYY-MM-DD'),
   to_date('2023-01-02', 'YYYY-MM-DD'),
   'xx',
   1,
   to_date('2019-12-02', 'YYYY-MM-DD'),
   2,
   to_date('2012-11-02', 'YYYY-MM-DD'));
   
DROP SEQUENCE seq_test_ycw;	-- 删除序列
```



## 公司表插入数据

```sql
/*CREATE SEQUENCE seq_test_ycw INCREMENT BY 1 START WITH 1; */
insert into FND_COMPANIES_42624
values
  (seq_test_ycw.nextval,
   '1001',
   '简',
   '全',
   'cn',
   to_date('2020-01-02', 'YYYY-MM-DD'),
   to_date('2023-01-02', 'YYYY-MM-DD'),
   'xx',
   1,
   to_date('2019-12-02', 'YYYY-MM-DD'),
   2,
   to_date('2012-11-02', 'YYYY-MM-DD'));
   
DROP SEQUENCE seq_test_ycw;	-- 删除序列
```

## 比较字符串是否相同

```sql
declare
  s1 varchar2(10) := 's1';
  s2 varchar2(10) := 's1';
begin
  if s1 = s2 then
    dbms_output.put_line(s1 || '和' || s2 || '相等');
  else
    dbms_output.put_line('不相等');
  end if;
end;
```

# 包模板

```sql
create or replace package BGT_JOURNAL_INTERFACE_PKG is -- 包名大写

  -- Author  : jinxiao.lin
  -- Created : 2008-2-21 10:02:14
  -- Purpose : BGT609.fmb 预算日记账导入

  g_enable_log varchar2(1) := 'Y';                  -- g_enable_log
  procedure txn_log(p_log_text in varchar2);           -- 声明 procedure txn_log
  function check_journal_interface(p_batch_id number, 
    p_form_error_message_code out varchar2) return number;  -- 声明 入口function
  end BGT_JOURNAL_INTERFACE_PKG;


create or replace package body BGT_JOURNAL_INTERFACE_PKG is                     -- 创建包体

g_this_package_name varchar2(30) := 'BGT_JOURNAL_INTERFACE_PKG';                -- 定义当前包名

g_error_log varchar2(2000);      --日志信息
g_transaction_logic_error_desc varchar2(2000);                                  --重大业务逻辑错误信息
g_form_error_message_code varchar2(30);                                         --返回给 FORM 的 mas_message_pkg.mas_error

g_inventory_too_low_desc varchar2(2000) := 'BGT609_INVENTORY_TOO_LOW';          -- g_inventory_too_low_desc 例外描述
g_year_too_small_desc    varchar2(2000) := 'BGT609_YEAR_TOO_SMALL';             -- g_year_too_small_desc 例外描述

e_inventory_too_low  exception;         -- e_inventory_too_low 声明例外

--必备方法
procedure txn_log(p_log_text in varchar2) is
  pragma autonomous_transaction;
begin
  if g_enable_log = 'Y' then
    insert into bgt_budget_error_logs
      (user_id, 。。 message, message_date)
    values
      (sys_global.user_id, p_log_text, sysdate);
    commit;
  end if;
end txn_log;

--封装数据库原子操作（CRUD）
function insert_bgt_journal_headers(p_budget_journal_header_id number)
  return number is
  v_return number := 0;   -- 返回值                                
  v_this_method_name constant varchar2(30) := 'INSERT_BGT_JOURNAL_HEADERS';     -- 定义当前方法名
begin
  return v_return;            -- 如果没有下列异常，直接返回 v_return
exception                     -- 检查异常
  when no_data_found then
    g_error_log := g_this_package_name || '.' || v_this_method_name || ': ' ||
                   sqlerrm || ' . ' || dbms_utility.format_error_backtrace;
    txn_log(g_error_log);
    v_return := -2;
    return v_return;
  when others then
    g_error_log := g_this_package_name || '.' || v_this_method_name || ': ' ||
                   sqlerrm || ' . ' || dbms_utility.format_error_backtrace;
    txn_log(g_error_log);
    v_return := -1;
    return v_return;
end insert_bgt_journal_headers;

--普通处理的重大业务逻辑错误 
procedure compare_year_value(p_year number) is
v_return number := 0;
begin
  if (p_year < 1990) then
    g_form_error_message_code := g_year_too_small_desc;
    v_return := get_sys_load_messages(p_message_code => g_form_error_message_code,
                                     p_message => g_transaction_logic_error_desc);
    raise;
  end if;
end compare_year_value;

--需要特殊处理的重大业务逻辑错误 
procedure check_inventory_quantity(p_inventory_quantity number) is
v_return number := 0;
begin
  if (p_inventory_quantity < 100) then
g_form_error_message_code := g_inventory_too_low_desc;
    v_return := get_sys_load_messages(p_message_code => g_form_error_message_code,
                                     p_message => g_transaction_logic_error_desc);
    raise e_inventory_too_low;
  end if;
end check_inventory_quantity;

--PACKAGE入口程序
function check_journal_interface(p_batch_id number, p_form_error_message_code out varchar2) return number is
  v_return number := 0;
begin
  return v_return;
exception
  when e_inventory_too_low then
.. .. .. .;
    g_error_log := g_this_package_name || ': ' || sqlerrm || ' . ' ||
                   g_transaction_logic_error_desc ||
                   dbms_utility.format_error_backtrace;
txn_log(g_error_log);
p_form_error_message_code := g_form_error_message_code;
    v_return := -1;
    return v_return;
  when others then
    g_error_log := g_this_package_name || ': ' || sqlerrm || ' . ' ||
                   g_transaction_logic_error_desc ||
                   dbms_utility.format_error_backtrace;
txn_log(g_error_log);
p_form_error_message_code := g_form_error_message_code;
    v_return := -1;
    return v_return;
end bgt_journal_interface;
end BGT_JOURNAL_INTERFACE_PKG;
---


```

# 项目表

```sql
--创建项目表--
create table prj_project_42624(
       Project_Id               number,
       Project_Number           varchar2(30),
       Company_Id               number,
       Project_Amount           number,
       Project_Status           varchar2(30),
       Currency_Code            varchar2(30),
       Project_Start_Date       Date,
       Created_By               Number not null,
       Creation_Date            Date not null,
       Last_Updated_By          Number not null,
       Last_Update_Date         Date not null
       );
       
--为项目表添加注释--
comment on table prj_project_42624 
is '项目表';

comment on column prj_project_42624.project_id 
is '项目id主键';

comment on column prj_project_42624.project_number 
is '项目编号';

comment on column prj_project_42624.company_id
is '公司Id';

comment on column prj_project_42624.project_amount 
is '项目金额';

comment on column prj_project_42624.project_status
is '项目审批状态';

comment on column prj_project_42624.currency_code
is '币种';

comment on column prj_project_42624.project_start_date
is '项目开始日期';

comment on column prj_project_42624.created_by
is '创建者';

comment on column prj_project_42624.creation_date
is '创建日期';

comment on column prj_project_42624.last_updated_by
is '更新者';

comment on column prj_project_42624.last_update_date
is '更新日期';


--为 项目id 添加主键约束--
alter table prj_project_42624
add constraint PRJ_PROJECT_42624_PK primary key(project_id);

--为 公司id 添加外键约束--
alter table prj_project_42624 
add constraint PRJ_PROJECT_42624_fk foreign key(company_id) 
references FND_COMPANIES_42624(COMPANY_ID);
```

## 插入项目表数据

```sql
insert into prj_project_42624
  (Project_Id,
   Project_Number,
   Company_Id,
   Project_Amount,
   Project_Status,
   Currency_Code,
   Project_Start_Date,
   Created_By,
   Creation_Date,
   Last_Updated_By,
   Last_Update_Date)
values
  (prj_project_seq_42624.Nextval,'PRJ202303110001',24,1000,'NEW','HKD',sysdate,1,sysdate,1,sysdate);
```

## 第2个条件、币种一致性

```sql
-- 查找币种一致性，一致结果为1，不一致结果为0
select count(1)
  from prj_project_42624 p
  join fnd_companies_42624 f
    on p.company_id = f.company_id
 where 'HKD' = f.functional_currency_code;
 
 -- 测试方法 func_company_project_currency 判断币种一致性
  select prj_project_42624_pkg.func_company_project_currency('HKD') from dual;
```

## 调用demo

```sql
-- 项目日期 下月20号
declare
  v_date varchar2(30);
begin
  prj_project_42624_pkg.PROC_PROJECT_START_DATE(v_date);
    dbms_output.put_line(v_date);
end;
```

![image-20230311172514209](G:\随笔\汉得培训\包练习.assets\image-20230311172514209.png)

# 抛错

```sql
sys_raise_app_error_pkg.raise_sys_others_error(p_message                 => '更新成绩操作失败',
                                                     p_created_by              => 42624,
                                                     p_package_name            => 'prj_project_42624_pkg',
                                                     p_procedure_function_name => 'proc_students_score_update');
                                               
raise_application_error([错误号],[错误信息]);
```



# 小结

1、赋值语句不要写在抛出异常的里面。

2、调用存储函数，返回值需要接收。

3、判断是否为空，用is NULL。

4、数字和日期不可直接转换。

TO_CHAR :  是把日期或者数字转换为字符串。

TO_DATE :  是把字符串转换为数据库中的日期类型。

TO_NUMBER：将字符串转换为数值型的格式。

5、日期格式化

![image-20230310230956335](https://raw.githubusercontent.com/SAH01/wordpress-img/master/imgs/202303142250723.png)

> 多花时间思考代码逻辑和业务流程
> 不止学技术还要学规范
> 如果某个问题是通过讨论或者请教同事解决的，之后需要自己再思考。
> 踏实做笔记，学习的过程中多写小demo，逐步增强理解
> 先搞清楚包的结构和执行方式，再去细化学习。
> 思想上由整体到局部，操作上由局部到整体。
>
> 类比思考，把现在学的新知识向之前学过的知识模式靠拢。
